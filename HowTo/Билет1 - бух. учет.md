# Анализ билета

Выделяем ключевые особенности решения 1-2 словами, чтобы потом по этому чек-листу разрабатывать решение

* Создать документ "Операция"
* Учет в разрезе сроков годности (Дата) / указывается в ТЧ
* Списание при продаже - от мин. срока
* Себестоимость - средняя по товару вцелом
* Отчет по кол-ву и сумме в разрезе товаров и сроков годности
  * Сумма расчетная! = [СредняяЦена] * [КоличествоПоСроку]
    * СредняяЦена = [СебестоимостьПоТовару] / [КоличествоТовара]

Полезно выписать проводки на листок, чтобы потом не смотреть в билет:

* Приходная накладная
  * *ДТ "Товары" = КТ "Поставщики" на кол-во и сумму закупа*
  
* Расходная накладная
  * *ДТ "Прибыли и убытки" = КТ "Товары" на кол-во и сумму себестоимости*
  * *ДТ "Покупатели" = КТ "Прибыли и убытки" на кол-во и сумму продажи*

**Проектирование регистра начинается с анализа отчета!**

* В отчете есть аналитики*: "Товар" и "Срок годности": значит  будет минимум 2 субконто: "Товар", "Срок годности"
  * В будущем одна из аналитик может быть измерением: *Организация*, *Валюта*

* В отчете есть данные по количеству, а значит должен быть ресурс "Количество"
  * Проектирование этого ресурса одинаково для всех задач:
    * Потребуется признак ведения учета "Количественный" и включить его для нужного счёта
      * в нашем случае это счет "Товары"
    * У ресурса надо будет отключить признак *балансовый*

* Как достать количество?
  * Берём таблицу остатков Регистра Бухгалтерии
    * Счет: "Товары"
    * Субконто: "Товары", "СрокГодности"
    * берём реквизит КоличествоОСтаток

* как достать данные для расчета суммы?
  * Берём таблицу остатков Регистра Бухгалтерии
    * Счет: "Товары"
    * Субконто: "Товары"
    * Формула в запросе будет: СуммаОстаток / КоличествоОстаток с проверкой на 0 в количестве
* Итого: 2 запрос и соединение меду ними

**ВАЖНО!** Этот анализ ВСЕГДА плюс минус в таком виде надо делать именно ДО решения билета, а то потом возможны ситуации, когда невозможно собрать отчет!

Дальше анализируем другие условия: есть ли там доп. аналитики или специфические условия, кроме выявленных в отчете? В нашем случае нет, поэтому можно приступать к решению билета